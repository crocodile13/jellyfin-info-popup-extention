<div id="infoPopupConfigPage" data-role="page" class="page libraryPage">
<div class="padded-left padded-right padded-bottom-page">

    <!-- En-tête -->
    <div class="detailSection">
        <h2 class="sectionTitle">
            <span class="material-icons" style="vertical-align:middle;margin-right:8px;">notifications_active</span>
            Info Popup
        </h2>
        <p class="sectionText" style="opacity:.75;margin-top:4px;">
            Diffusez des messages à tous les utilisateurs. Le message s'affiche en popup à leur prochaine connexion.
        </p>
    </div>

    <!-- Nouveau message -->
    <div class="detailSection">
        <h3 class="sectionTitle">Nouveau message</h3>

        <div class="inputContainer">
            <label class="inputLabel inputLabelUnfocused" for="ip-title">Titre *</label>
            <input id="ip-title"
                   type="text"
                   class="emby-input"
                   maxlength="200"
                   placeholder="Saisir le titre du message..."
                   autocomplete="off"/>
            <div id="ip-title-err" class="fieldDescription" style="color:#cf6679;display:none;"></div>
        </div>

        <div class="inputContainer" style="margin-top:16px;">
            <label class="inputLabel inputLabelUnfocused" for="ip-body">Message *</label>
            <textarea id="ip-body"
                      class="emby-textarea"
                      maxlength="10000"
                      rows="6"
                      placeholder="Saisir le contenu en texte brut..."
                      style="resize:vertical;width:100%;box-sizing:border-box;"></textarea>
            <div id="ip-body-err" class="fieldDescription" style="color:#cf6679;display:none;"></div>
        </div>

        <div style="margin-top:20px;display:flex;align-items:center;gap:16px;flex-wrap:wrap;">
            <button id="ip-publish-btn" class="raised button-submit emby-button" type="button">
                <span class="material-icons" style="vertical-align:middle;margin-right:6px;font-size:1.1em;">send</span>
                Publier le message
            </button>
            <div id="ip-toast" style="display:none;padding:8px 14px;border-radius:4px;font-size:.9rem;"></div>
        </div>
    </div>

    <!-- Historique -->
    <div class="detailSection" style="margin-top:32px;">
        <h3 class="sectionTitle">Historique des messages</h3>

        <div style="display:flex;align-items:center;gap:12px;margin-bottom:16px;flex-wrap:wrap;">
            <label style="display:flex;align-items:center;gap:8px;cursor:pointer;user-select:none;">
                <input id="ip-select-all" type="checkbox" class="emby-checkbox"/>
                <span>Tout sélectionner</span>
            </label>
            <button id="ip-delete-btn" class="raised emby-button button-delete" type="button" disabled
                    style="display:flex;align-items:center;gap:6px;">
                <span class="material-icons" style="font-size:1em;">delete</span>
                Supprimer la sélection
            </button>
            <span id="ip-sel-count" style="opacity:.6;font-size:.88rem;"></span>
        </div>

        <div id="ip-msg-container">
            <p id="ip-empty" style="opacity:.55;">Aucun message publié pour le moment.</p>
        </div>
    </div>

</div>
</div>

<style>
.ip-table { width:100%; border-collapse:collapse; font-size:.92rem; }
.ip-table thead th { text-align:left; padding:10px 12px; border-bottom:2px solid rgba(255,255,255,.15); font-weight:600; opacity:.8; }
.ip-table tbody tr { border-bottom:1px solid rgba(255,255,255,.07); transition:background .12s; }
.ip-table tbody tr:hover { background:rgba(255,255,255,.04); }
.ip-table td { padding:10px 12px; vertical-align:middle; }
.ip-col-check { width:40px; }
.ip-col-date  { width:170px; opacity:.65; white-space:nowrap; }
.ip-col-title { font-weight:500; overflow-wrap:break-word; word-break:break-word; }

.ip-toast-ok  { background:rgba(0,180,100,.2); border:1px solid rgba(0,180,100,.5); color:#6ee09f; }
.ip-toast-err { background:rgba(207,102,121,.2); border:1px solid rgba(207,102,121,.5); color:#cf6679; }

.ip-confirm-backdrop {
    position:fixed; inset:0; background:rgba(0,0,0,.6);
    z-index:99999; display:flex; align-items:center; justify-content:center;
}
.ip-confirm-box {
    background:var(--theme-body-background-color,#202020); color:var(--theme-text-color,#e5e5e5);
    border:1px solid rgba(255,255,255,.15); border-radius:8px;
    padding:28px 28px 22px; max-width:420px; width:calc(100% - 32px);
    box-shadow:0 8px 32px rgba(0,0,0,.6);
}
.ip-confirm-box h4 { margin:0 0 10px; font-size:1.05rem; }
.ip-confirm-box p  { margin:0 0 22px; opacity:.8; font-size:.93rem; line-height:1.5; }
.ip-confirm-actions { display:flex; justify-content:flex-end; gap:12px; }
</style>
